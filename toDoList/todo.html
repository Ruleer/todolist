<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="/toDoList/todocss.css" rel="stylesheet" type="text/css"/>
    <title>ToDoList</title>
</head>
<body>
    <div class="head">
        <h1 class="head-name">TodoList</h1>
    </div>
    <span id="description">在Todo输入需要做的工作，完成则单击文字将其移入Done；点击小黄点，可以修改对应任务；点击小红点，移除这项任务.</span>
    <div id="todo-name">
        <h4 id="t1">ToDo</h4>
    </div>
    <div id="done-name">
        <h4 id="t1">
            Done
        </h4>
    </div> 
    <div class="todo">
        <input id="thing1" type="text" value="我要">
        <button id="btn1">ADD</button>
        <ul id="list1">
            <li class="every0" id="every"><span id="doThing">请添加你的todo事项</span><div class="chg" id="chg"><img src="/toDoList/changebutton.png" width="15px" height="15px"/></div></li>
        </ul>
    </div>
    <div class="done">
        <ul id="list2">
            <li class = "either">这里是你已经完成的事项<div class="del" id="del"><img src="/toDoList/deletebutton.png" width="15px" height="15px"></div></li>
        </ul>
    </div>
    <script>
        var order1 = 1;
        var order2 = 0;

        var btn1 = document.getElementById("btn1");
        //将todo中的事项移到右边并删除
        var wordClick = function(data) {
            //console.log(data.target);
            var before = data.target;
            console.log(before);
            var del = before.parentNode;
            //before.removeChild(del);
            createRight(before.innerHTML);
            //var old = data.path[0];
            var list1 = document.getElementById("list1");
            list1.removeChild(del);
        }
        //在done中创建事项
        var createRight = function(text){
            var li = document.createElement("li");
            var det = document.getElementById("del").cloneNode(true);
            det.className = "del" + order2 ;
            li.className = "either"+order2;
            li.id = "either";
            var addList = document.getElementById("list2");
            var input = document.createTextNode(text);
            li.appendChild(input);
            li.appendChild(det);
            addList.appendChild(li);
            var word = document.getElementsByClassName("del" + order2);
            for (var i = 0; i < word.length; i++) {
                word[i].onclick = deleteText;
            }
            order2++;
        }
        //点击按钮，获取文本框中的文字并添加到todo
        btn1.onclick = function(){
        //获取文字并添加
        var thing = document.getElementById("thing1").value;
        var li = document.createElement("li");
        li.className = "every" + order1;
        li.id = "every";
        var input = document.createTextNode(thing);
        var addList = document.getElementById("list1");
        var div = document.createElement("span");
        div.appendChild(input);
        li.appendChild(div);
        addList.appendChild(li);

        //给每一行添加黄点
        var dot = document.getElementById("chg").cloneNode(true);
        li.appendChild(dot);

        //使文字单击时执行
        var word = document.getElementsByClassName("every"+order1);
        for (var i = 0; i < word.length; i++) {
            word[i].onclick = wordClick;
            dot.onclick = chg;
            }
        order1++;
        }

        var dtext = document.getElementById("either");

        //删除done
        var deleteText = function(data){
            
            var old = data.target;
            //console.log(old);
            var list2 = document.getElementById("list2");
            list2.removeChild(old.parentNode.parentNode);
        }
        //点击黄点时弹出窗口修改
        var chg = function(data){
            //console.log(data.path[2].firstChild);
            var old = data.path[2].firstChild.innerHTML;
            var name = prompt("修改你的todo：", old);
            data.path[2].firstChild.innerHTML = name;
        }

    </script>
</body>
</html>